{% extends "layout.html" %}

{% block title %}
    Add New Recipe
{% endblock %}

{% block head %}
<style>
    .noPadLeft{
        padding-left: 0px;
    }

    .btnRight{
        margin-right: 15px;
    }
</style>
{% endblock %}

{% block main %}
<div class="container">
    <div class="containerStyle">
        <br/>
        <br/>
        <h1 class="display-4 addNewHeader">Add a new recipe to the Pinnelli Cookbook!</h1>
        <br/>
        <form action="/new" method="POST" class="needs-validation" enctype="multipart/form-data" novalidate>
            <div class="form-group row">
                <label for="name"> Recipe Name</label>
                <input type="text" class="form-control name" id="name" name="name" required>
                <div class="invalid-feedback">
                    Please provide a name for your recipe
                </div>
            </div>
            <div class="form-group row">
                <label for="author">Author</label>
                <input type="text" class="form-control author" id="author" name="author" required>
                <div class="invalid-feedback">
                    Please provide the author of this recipe
                </div>
            </div>
            <div class="form-group row">
                <label for="instructions">Instructions</label>
                <textarea type="text" class="form-control instructions" id="instructions" name="instructions" style="height: 10em;" maxlength="5000" required></textarea>
                <div class="invalid-feedback">
                    Please provide some instructions
                </div>
            </div>
            <div class="form-group row" id="photoDiv">
                <label for="txtPost">Photo</label>
                <div class="input-group" style="display: inline-block;">
                    <img id="imgUpload" style="width: 140px; height: 140px; margin-bottom: 5px;" class="img-thumbnail">
                    <input type="hidden" name="filePath" id="filePath"></input>
                    <div id="btnRow" class="pull-right" style="float: right">
                        <span class="input-group-btn">
                        <span class="btn btn-primary btn-file">
                            Add Photo <input type="file" class="fileuploadNEW" id="fileuploadNEW" name="fileupload">
                        </span>
                        </span>
                    </div>
                    <div  class="progress active" style="width: 140px; height: 10px;" >
                        <div id="progress" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" style="width: 0%;"></div>
                    </div>
                </div>
                <div>
                    <span id="upMsg" style="font-size: 12px;"></span>
                </div>
            </div>
            <fieldset id="addIngredients">
                <div class="form-group row ingredientRow">
                    <div class="col-md-4 noPadLeft">
                        <label class="label" for="ingredient1">Ingredient</label>
                        <input type="text" class="form-control ingredient autoComp" id="ingredient1" name="ingredient1" required autocomplete="Off"/>
                    </div>
                    <div class="col-md-2 noPadLeft">
                        <label class="label" for="amount1">Amount</label>
                        <input type="text" class="form-control amount" id="amount1" name="amount1" required autocomplete="Off"/>
                    </div>
                    <div class="col-md-2 noPadLeft">
                        <label class="label" for="measure1">Measure</label>
                        <input type="text" class="form-control measure" id="measure1" name="measure1" list="measures" required autocomplete="Off">
                    </div>
                    <datalist id="measures">
                        {% for measure in measureList %}
                        <option value="{{ measure['name'] }}">
                        {% endfor %}
                    </datalist>
                    <div class="invalid-feedback">
                        Please provide an ingredient name, measure and amount for all ingredients
                    </div>
                </div>
            </fieldset>
            <div class="form-group row">
                <button type="button" class="btn btn-secondary btn-block btnRight" id="add" value="Add Ingredient">Add Ingredient</button>
            </div>
            <div class="form-group row">
                <button type="submit" class="btn btn-primary btn-block btnRight" id="submitRecipe">Add Recipe!</button>
            </div>
            <input type="hidden" id="recipeIDHidden" name="recipeIDHidden" >
        </form>
    </div>
</div>

    <script type="text/javascript" src="/static/new.js"></script>
    <script type="text/javascript" src="/static/jquery.ui.widget.js"></script>
    <script type="text/javascript" src="/static/jquery.fileupload.js"></script>
    <script type="text/javascript" src="/static/jquery.fileupload-ui.js"></script>
    <script type="text/javascript" src="/static/jquery.fileupload-process.js"></script>
    <script type="text/javascript" src="/static/jquery.fileupload-image.js"></script>

{% endblock %}